
---

# 📝 AI 맞춤형 잡곡 추천 서비스 개요

이 서비스는 **논문 기반의 영양 성분 분석**을 통해 질환별 최적의 잡곡 순위를 도출하고, 사용자의 **건강 목적**과 **식감 선호도**를 반영하여 **1일 섭취량 기준 최적의 혼합 비율**을 계산하는 알고리즘입니다.

## 1. 데이터 산출 근거 (Data Methodology)

단순한 경험적 추천이 아닌, 데이터 기반의 수학적 모델링을 통해 우선순위를 선정했습니다.

*   **근거 자료:** '시트 19' 및 관련 논문 (목표 질환별 유효 성분 정의)
*   **분석 대상:** 곡물 영양성분 매트릭스
*   **순위 산출 방식 (Algorithm):**
    1.  목표 질환(예: 당뇨, 고혈압)에 효능이 있는 영양 성분을 식별.
    2.  각 곡물의 해당 성분 함량을 **Z-score (표준화 점수)**로 변환하여 데이터 스케일을 통일.
    3.  Z-score의 총합을 구하여 점수가 높은 순서대로 **Top 10 곡물** 선정.
*   **참고 리포지토리:** [GitHub - aiGrainMix](https://github.com/IoTcuchen/aiGrainMix)

---

## 2. 핵심 추천 로직 (Logic Flow)

사용자가 입력한 조건에 따라 아래 과정을 거쳐 최종 레시피(g)를 출력합니다.

### A. 점수 산출 (Scoring)
*   **기본 점수:** 데이터에 기반한 Top 10 순위를 역순으로 점수화 (1위 10점 ~ 10위 1점).
*   **다중 목적:** 여러 질환 선택 시 점수를 합산하여 공통적으로 좋은 곡물을 우대.

### B. 식감 가중치 적용 (Texture Weighting)
사용자의 식감 선호도("찰기", "고슬", "일반")와 곡물의 찰기 등급(1~5순위)을 매칭하여 점수를 보정합니다.

| 식감 등급 | 포함 곡물 예시 | 찰기 선호 시 | 고슬 선호 시 |
| :--- | :--- | :--- | :--- |
| **1순위 (최상)** | 찰보리, 찹쌀, 찰흑미 | **가산점 (x1.5)** | 감점 (x0.6) |
| **2순위 (상)** | 백미, 기장, 차조 | 가산점 (x1.2) | 감점 (x0.8) |
| **3순위 (중)** | 퀴노아, 귀리, 아마씨 | 변동 없음 | 변동 없음 |
| **4순위 (하)** | 녹두, 율무, 강낭콩 | 감점 (x0.85) | 가산점 (x1.2) |
| **5순위 (최하)** | 서리태, 콩류, 메밀 | **감점 (x0.7)** | **가산점 (x1.4)** |

### C. 무게 배분 (Distribution - Waterfall Algorithm)
*   **잡곡 선정:** 점수가 높은 상위 5개 잡곡 선정 (부족 시 자동 확장).
*   **12% 제한 (Capping):** 특정 잡곡이 전체 무게의 **12%를 초과하지 않도록 제한**.
*   **재분배:** 12%를 초과한 무게는 다음 순위 잡곡들에게 점수 비례로 재분배 (워터폴 방식).
*   **총량 보정:** 베이스 곡물(50% 등)과 잡곡의 합이 정확히 100%가 되도록 미세 오차 보정.

---

## 3. 사용 데이터셋 (Dataset)

### ① 질환별 추천 순위 (Rank Data)
*(Z-score 기반 Top 10 선정 결과)*

*   **당뇨병:** 아마씨, 대두, 치아씨, 강낭콩, 쥐눈이콩...
*   **고혈압:** 아마씨, 대두, 쥐눈이콩, 강낭콩, 서리태...
*   **대장암:** 녹두, 서리태, 흑태, 쥐눈이콩, 대두...
*   **피로 회복:** 동부콩, 아마씨, 잠두콩, 리마콩...
*   **변비:** 대두, 강낭콩, 녹두, 쥐눈이콩, 흑태...
*   **간 건강:** 아마씨, 치아씨, 대두, 쥐눈이콩...
*   **혈중 콜레스테롤:** 아마씨, 강낭콩, 겉보리, 쌀보리...
*   **골다공증:** 치아씨, 쥐눈이콩, 대두, 아마씨, 녹두...

### ② 식감 그룹 데이터 (Texture Groups)
*   **1그룹 (찰기↑):** 찰보리, 찰흑미, 찰기장, 찹쌀, 찰현미
*   **2그룹:** 기장, 찰수수, 차조, 백미
*   **3그룹:** 아마란스, 귀리(쌀/겉), 퀴노아, 치아씨
*   **4그룹:** 녹두, 강낭콩, 율무, 현미
*   **5그룹 (찰기↓):** 콩류(서리태, 대두, 팥 등), 메밀

---

## 4. 사용 방법 및 테스트

구글 스프레드시트에서 아래 함수를 통해 결과를 확인할 수 있습니다.

*   **테스트 시트:** [Google Sheet Link](https://docs.google.com/spreadsheets/d/1fZkKF3yEiMXFdGaujVuRzb1Bcgs8TuuXNN0OfJvbkxw/edit?gid=260295960#gid=260295960)
*   **함수 문법:**
    ```excel
    =GET_GRAIN_MIX(목적, 베이스곡물, 인분수, 베이스비율, 식감선호)
    ```

### 사용 예시
1.  **간 건강/변비 + 2인분 + 현미 50% + "고슬"한 밥 선호**
    ```excel
    =GET_GRAIN_MIX("간 건강, 변비", "현미", 2, 50, "고슬")
    ```
    > **결과 예상:** 콩류(5순위)인 대두, 서리태 등의 비중이 높아지고, 찰기 있는 곡물은 줄어듦.

2.  **간 건강/변비 + 2인분 + 백미 50% + "찰기"있는 밥 선호**
    ```excel
    =GET_GRAIN_MIX("간 건강, 변비", "백미", 2, 50, "찰기")
    ```
    > **결과 예상:** 같은 목적이라도 찰기 그룹(1~2순위)의 곡물 비중이 늘어나거나 순위가 상승함.

3.  **당뇨 + 2인분 + 현미 50% + "찰기" 선호**
    ```excel
    =GET_GRAIN_MIX("당뇨", "현미", 2, 50, "찰기")
    ```
